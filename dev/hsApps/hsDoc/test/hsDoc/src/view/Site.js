const m = require("mithril");
import { Layout, px, FILL } from '../../../hsLayout/dist/js/';
import { Modules } from '../Modules';
const TitleHeight = px(30); // 
const FooterHeight = px(10); // 
const LeftNavWidth = px(150);
const SiteName = 'HSDocs';
const COPYRIGHT = "(c) Helpful Scripts";
export class HsSite extends Layout {
    view(node) {
        const lib = node.attrs.lib || 'projectOverview';
        const field = node.attrs.field || 'libOverview';
        console.log(`HsSite: lib=${lib}, field=${field}`);
        return this.layout('.hs-site', node, { rows: [TitleHeight, FILL, FooterHeight] }, [
            m(HeaderBar),
            m(MainArea, { lib: lib, field: field }),
            m(FooterBar)
        ]);
    }
}
//----------- Main Site parts --------------------------------------------------------
class HeaderBar extends Layout {
    view(node) {
        return this.layout('.hs-site-header', node, { columns: [LeftNavWidth, FILL] }, [
            m(SiteTitle),
            m(ModulesTitleBar)
        ]);
    }
}
;
class MainArea extends Layout {
    view(node) {
        return this.layout('.hs-site-main', node, { columns: [LeftNavWidth, FILL] }, [
            m(ModuleNav, { lib: node.attrs.lib, field: node.attrs.field }),
            m(ModuleDetail, { lib: node.attrs.lib, field: node.attrs.field })
        ]);
    }
}
;
class FooterBar extends Layout {
    view(node) {
        return this.layout('.hs-site-footer', node, {}, COPYRIGHT);
    }
}
;
//----------- HeaderBar parts --------------------------------------------------------
class SiteTitle extends Layout {
    view(node) {
        return this.layout('.hs-site-title', node, {}, SiteName);
    }
}
;
class ModulesTitleBar extends Layout {
    view(node) {
        return this.layout('.hs-module-title', node, { columns: [] }, Modules.list.map((mdl) => m(ModuleName, { name: mdl.name })));
    }
}
;
//----------- MainArea parts --------------------------------------------------------
class ModuleNav extends Layout {
    view(node) {
        return this.layout('.hs-module-nav', node, {}, node.attrs.lib);
    }
}
class ModuleDetail extends Layout {
    view(node) {
        return this.layout('.hs-module-detail', node, {}, `${node.attrs.field}`);
    }
}
//----------- ModulesTitleBar parts --------------------------------------------------------
class ModuleName extends Layout {
    view(node) {
        console.log('ModuleName ' + node.attrs.name);
        return this.layout('.hs-module-name', node, { href: `/api/${node.attrs.name}/`, oncreate: m.route.link, onupdate: m.route.link }, node.attrs.name);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2l0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aWV3L1NpdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRTdCLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzlELE9BQU8sRUFBVSxPQUFPLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFHN0MsTUFBTSxXQUFXLEdBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUcsR0FBRztBQUNuQyxNQUFNLFlBQVksR0FBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBRyxHQUFHO0FBQ25DLE1BQU0sWUFBWSxHQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM5QixNQUFNLFFBQVEsR0FBUSxRQUFRLENBQUM7QUFDL0IsTUFBTSxTQUFTLEdBQU8scUJBQXFCLENBQUM7QUFFNUMsTUFBTSxhQUFjLFNBQVEsTUFBTTtJQUM5QixJQUFJLENBQUMsSUFBbUI7UUFDcEIsTUFBTSxHQUFHLEdBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksaUJBQWlCLENBQUM7UUFDbEQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksYUFBYSxDQUFDO1FBQ2hELE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxHQUFHLFdBQVcsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUNsRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFDLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsRUFBRSxFQUFFO1lBQzdFLENBQUMsQ0FBQyxTQUFTLENBQUM7WUFDWixDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUMsR0FBRyxFQUFDLEdB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