this.hsUtil=(()=>{var __webpack_modules__={687:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Log:()=>Log,Pace:()=>Pace,Request:()=>Request,date:()=>date,delay:()=>delay,ms:()=>ms,shortCheckSum:()=>shortCheckSum,timeout:()=>timeout,uniquefy:()=>uniquefy});const monthStr=[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],dayStr=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]];function formatNumber(number,digits){let r=""+number;for(;r.length<digits;)r="0"+r;return r}function date(formatString,date=new Date){return"string"!=typeof formatString||isNaN(date.getTime())?"invalid":formatString.replace(/%YYYY/g,""+date.getFullYear()).replace(/%YY/g,""+date.getFullYear()%100).replace(/%MMMM/g,monthStr[date.getMonth()][1]).replace(/%MMM/g,monthStr[date.getMonth()][0]).replace(/%MM/g,formatNumber(date.getMonth()+1,2)).replace(/%M/g,""+(date.getMonth()+1)).replace(/%DDDD/g,dayStr[date.getDay()][1]).replace(/%DDD/g,dayStr[date.getDay()][0]).replace(/%DD/g,formatNumber(date.getDate(),2)).replace(/%D/g,""+date.getDate()).replace(/%hh/g,formatNumber(date.getHours(),2)).replace(/%h/g,""+date.getHours()).replace(/%mm/g,formatNumber(date.getMinutes(),2)).replace(/%m/g,""+date.getMinutes()).replace(/%ss/g,formatNumber(date.getSeconds(),2)).replace(/%jjj/g,formatNumber(date.getMilliseconds(),3)).replace(/%jj/g,formatNumber(date.getMilliseconds()/10,2)).replace(/%j/g,formatNumber(date.getMilliseconds()/100,1))}const ms={fromMinutes:min=>6e4*min,fromHours:h=>36e5*h,fromDays:d=>864e5*d,fromWeeks:w=>6048e5*w,toMinutes:ms=>ms/6e4,toHours:ms=>ms/36e5,toDays:ms=>ms/864e5,toWeeks:ms=>ms/6048e5},COLOR={clear:"color:#000; background-color:inherit; font-weight:normal;",bold:"font-weight:bold;",dim:"",underscore:"",blink:"",reverse:"",hidden:"",black:"color:#000;",red:"color:#f00;",green:"color:#0f0;",yellow:"color:#ff0;",blue:"color:#00f;",magenta:"color:#f0f;",cyan:"color:#0ff;",white:"color:#fff;",darkred:"color:#800;",darkgreen:"color:#080;",darkyellow:"color:#880;",darkblue:"color:#008;",darkmagenta:"color:#808;",darkcyan:"color:#088;",gray:"color:#888;",bgBlack:"background-color:#000;",bgRed:"background-color:#f00;",bgGreen:"background-color:#0f0;",bgYellow:"background-color:#ff0;",bgBlue:"background-color:#00f;",bgMagenta:"background-color:#f0f;",bgCyan:"background-color:#0ff;",bgWhite:"background-color:#fff;"};class Log{constructor(prefix){this.reportLevel=void 0,this.reportPrefix="",this.maxLength=-1,this.colors=!0,this.reportPrefix=prefix}set messageLength(max){this.maxLength=max}get messageLength(){return this.maxLength}level(newLevelSym,setGlobalLevel){let newLevel=Log.levels[newLevelSym]||Log.globalLevel,oldLevel=this.reportLevel||Log.globalLevel;if(void 0===newLevelSym)newLevel=oldLevel;else if(null===newLevelSym)this.reportLevel=void 0;else if(Log.levels[newLevelSym]){setGlobalLevel?Log.globalLevel=newLevel:this.reportLevel=newLevel;const msg=`new ${setGlobalLevel?"global":this.reportPrefix} log level ${newLevel.desc.toUpperCase()} (was ${oldLevel.desc.toUpperCase()})`;newLevel.sym===oldLevel.sym?this.debug(msg):this.info(msg)}else this.error(`unkown level ${newLevelSym}; log level remains ${oldLevel.sym}`);return newLevel.sym}debug(msg){return this.out(Log.DEBUG,msg,{color:["gray"]})}transient(msg){return this.out(Log.INFO,msg,{color:["darkgreen"],lf:"\r"})}progress(msg){return this.out(Log.INFO,msg,{color:["darkblue"]})}info(msg){return this.out(Log.INFO,msg,{color:["darkgreen"]})}warn(msg){return this.out(Log.WARN,msg,{color:["darkyellow","bold"]})}error(msg){const color=["darkred","bold"];return msg.message?(this.out(Log.ERROR,msg.message,{color}),this.out(Log.ERROR,msg.stack,{color}),msg.message):this.out(Log.ERROR,msg,{color})}out(lvl,msg,options){let desc=Log.levels[lvl];const filterLevel=this.reportLevel||Log.globalLevel;if(desc.importance>=filterLevel.importance){let line;switch(typeof msg){case"function":line=msg();break;case"string":line=msg;break;case"object":default:line=this.inspect(msg)}const dateStr=date(Log.dateFormat);line.length>this.maxLength&&this.maxLength>0&&(line=`${line.slice(0,this.maxLength/2-2)}...${line.slice(-this.maxLength/2+2)}`),msg.stack&&(line=`${line}\n${msg.stack}`);const header=`${dateStr} ${this.reportPrefix} ${desc.desc}`;return this.output(options.color,header,line),line+(options.lf||"")}}output(color,header,line){console.log(`%c${header}%c ${line}`,color.map(c=>COLOR[c]).join(" "),COLOR.clear)}format(fmtStr){return null===fmtStr?Log.dateFormat=Log.defDateFormat:fmtStr&&(Log.dateFormat=fmtStr),Log.dateFormat}prefix(prf){return prf&&(this.reportPrefix=prf),this.reportPrefix}config(cfg){void 0!==cfg.format&&this.format(cfg.format),void 0!==cfg.level&&this.level(cfg.level),void 0!==cfg.colors&&(this.colors=cfg.colors)}inspect(msg,{depth=-1,indent="   ",colors=Log.INDENT_COLORS}={depth:0,indent:"   ",colors:Log.INDENT_COLORS}){const log=this;return function _inspect(msg,depth,level,currIndent){if(null===msg)return"null";if(void 0===msg)return"undefined";if("function"==typeof msg)return"function";if("string"==typeof msg)return`'${msg}'`;if("object"==typeof msg){if(depth<0)return void 0===msg.length?"{...}":"[...]";if(void 0!==msg.map)return`[${msg.map(e=>void 0===e?"":_inspect(e,depth-1,level+1,currIndent)).join(", ")}]`;const[prefix,postfix,lf,postIndent]=log.getPrePostfix(indent,level,currIndent,colors);return"{"+lf+Object.keys(msg).map(k=>`${prefix}${k}${postfix}: ${_inspect(msg[k],depth-1,level+1,currIndent+indent)}`).join(","+lf)+`${lf}${postIndent}}`}return msg.toString()}(msg,null!=depth&&depth>=0?depth:999,0,"")}getPrePostfix(indent,level,currIndent,colors){let cstart="",cstop="",lf="\n";if(colors){indent=indent.replace(/ /g,"&nbsp;"),currIndent=currIndent.replace(/ /g,"&nbsp;");cstart=`<b><span style='${COLOR[colors[level%colors.length]]||colors[level%colors.length]}'>`,cstop="</span></b>",lf="<br>"}return[`${currIndent}${indent}${cstart}`,""+cstop,colors?"<br>":"\n",currIndent]}}Log.INDENT_COLORS=["darkblue","darkgreen","darkred","darkcyan","darkyellow","darkmagenta"],Log.defDateFormat="%YYYY%MM%DD %hh:%mm:%ss.%jjj",Log.dateFormat=Log.defDateFormat,Log.DEBUG="DEBUG",Log.INFO="INFO",Log.WARN="WARN",Log.ERROR="ERROR",Log.levels={[Log.DEBUG]:{importance:0,sym:Log.DEBUG,desc:"DEBUG"},[Log.INFO]:{importance:1,sym:Log.INFO,desc:"INFO"},[Log.WARN]:{importance:2,sym:Log.WARN,desc:"WARN"},[Log.ERROR]:{importance:3,sym:Log.ERROR,desc:"ERROR"}},Log.log=new Log(""),Log.globalLevel=Log.levels[Log.INFO];new Log("Pacing");function timeout(ms,...rest){return new Promise((resolve,reject)=>{setTimeout(reject,ms,...rest)})}function delay(ms){return args=>new Promise(resolve=>{setTimeout(()=>{resolve(args)},ms)})}class Pace{constructor({pace=100,maxConcurrent=-1,collectionPeriod=0}){this.maxConcurrent=-1,this.pace=0,this.waitUntil=0,this.waiting=0,this.started=0,this.queue={},this.collectionPeriod=0,this.pace=pace,this.maxConcurrent=maxConcurrent,this.collectionPeriod=collectionPeriod}isAllowed(){return this.maxConcurrent<0||this.started<this.maxConcurrent}setPace(ms){this.pace=ms}setMaxConcurrent(maxConcurrent){this.maxConcurrent=maxConcurrent}inQueue(){return this.waiting}inProgress(){return this.started}async add(fn,key){const now=(new Date).getTime(),callTime=now+Math.max(this.collectionPeriod,this.waitUntil);let item;return this.waitUntil+=this.pace,key&&this.queue[key]?(item=this.queue[key],clearTimeout(item.timer),item.fn=fn,item.added=now):(item={fn,added:now,pace:this,key:key=key||`${now}-${Math.floor(1e5*Math.random())}`},this.queue[key]=item,this.waiting++),this.resolveItem(item,callTime-now)}resolveItem(item,waitTime){return new Promise((resolve,reject)=>{item.timer=setTimeout(async _item=>{try{const key=_item.key;delete _item.pace.queue[key],_item.pace.waiting--,await(pace=_item.pace,new Promise(release=>{const waitLoop=()=>pace.isAllowed()?release():setTimeout(waitLoop,10);waitLoop()})),_item.pace.started++;const actualDelay=Date.now()-_item.added,ret=await _item.fn(actualDelay);_item.pace.started--,resolve(ret)}catch(e){_item.pace.started--,reject(e)}var pace},waitTime,item)})}}var external_crypto_=__webpack_require__(417);class Auth{constructor(username,password){this.username=username,this.password=password}}new Log("RequestDigest");class AuthDigest extends Auth{constructor(){super(...arguments),this.nc=0}updateNC(){let padding=new Array(8).join("0")+"";this.nc=this.nc>99999999?1:this.nc+1;let nc=this.nc+"";return padding.substr(0,8-nc.length)+nc}generateCNONCE(qop){let cnonce,nc;if("string"==typeof qop){let cnonceHash=(0,external_crypto_.createHash)("md5");cnonceHash.update(Math.random().toString(36)),cnonce=cnonceHash.digest("hex").substr(0,16),nc=this.updateNC()}return{cnonce,nc}}testAuth(options,data,response){let challenge=function(digestHeader){digestHeader=digestHeader.split("Digest ")[1];const params={};return digestHeader.replace(/([^,]*)/g,(...rest)=>{const part=rest[1];if(part){const kv=part.split("=").map(v=>v.trim());params[kv[0]]=kv[1].replace(/\"/g,"")}return""}),params}(response.headers["www-authenticate"]),ha1=(0,external_crypto_.createHash)("md5"),_str=`${this.username}:${challenge.realm}:${this.password}`;ha1.update(_str);let ha2=(0,external_crypto_.createHash)("md5");_str=`${options.method}:${options.path}`,ha2.update(_str);let{nc,cnonce}=this.generateCNONCE(challenge.qop),hash=(0,external_crypto_.createHash)("md5");_str=`${ha1.digest("hex")}:${challenge.nonce}:${nc}:${cnonce}:${challenge.qop}:${ha2.digest("hex")}`,hash.update(_str);let authParams={realm:challenge.realm,username:this.username,uri:options.path,qop:challenge.qop,nonce:challenge.nonce,algorithm:"MD5",response:hash.digest("hex")};return authParams=function(data){let newObject={};return Object.keys(data).forEach(k=>{null!==data[k]&&void 0!==data[k]&&(newObject[k]=data[k])}),newObject}(authParams),cnonce&&(authParams.nc=nc,authParams.cnonce=cnonce),options.headers.Authorization=function(params){let parts=[];for(let i in params)if("function"!=typeof params[i]){let param=i+"="+(["qop","nc"].indexOf(i)<0?`"${params[i]}"`:params[i]);parts.push(param)}return"Digest "+parts.join(",")}(authParams),options}}new Log("RequestBasic");class AuthBasic extends Auth{testAuth(options,data,response){var str;return options.headers.Authorization="Basic "+((str=`${this.username}:${this.password}`)instanceof Buffer?str:Buffer.from(str.toString(),"binary")).toString("base64"),options}}const Request_log=new Log("Request");Request_log.messageLength=120;class Request{constructor(){this.log=Request_log,this.setCredentials=(user,password)=>{this.credentials=void 0===user?void 0:{user,password}},this.setAuthToken=token=>this.authToken=token,this.setPace=({pace=50,max=10,collectionPeriod=100}={pace:null})=>{this.pace=!pace||pace<0?void 0:new Pace({pace,maxConcurrent:max,collectionPeriod})},this.clearPace=()=>this.setPace(),this.decode=void 0}static addContentType(type,isText){const subTypes=type.split("/");Request.contentTypes.push({subTypes,isText})}async get(url,{useCached=!0,headers={}}={}){const options=this.getOptions(url,"GET");return this.decodedRequest(options,useCached,headers)}async put(url,postData,{headers={}}={}){const options=this.getOptions(url,"PUT");return this.decodedRequest(options,!1,headers,postData)}async post(url,postData,{headers={}}={}){const options=this.getOptions(url,"POST");return this.decodedRequest(options,!1,headers,postData)}getURL(url){return"string"==typeof url?new URL(url,document.URL):url}getOptions(url,method){const options={rejectUnauthorized:!1,method,protocol:(url=this.getURL(url)).protocol,host:url.host,hostname:url.hostname,port:url.port,pathname:""+url.pathname,path:""+url.pathname+(url.search||""),headers:{},url:`${url.protocol}//${url.host}${""+url.pathname+(url.search||"")}`};return this.authToken&&(options.headers.AuthToken=this.authToken),options}async decodedRequest(options,useCached,headers,postData){const result=await this.requestOptions(options,useCached,postData);return this.decode&&result.response.txt&&"GET"===options.method&&(result.data=this.decode(result.data,options)),result}async requestOptions(options,useCached,postData){let request;this.pace?(this.log.transient(`(${this.pace.inQueue()} | ${this.pace.inProgress()}) ${options.method}-ing ${options.url}`),request=this.pace.add(()=>this.request(options,postData),`${options.method} ${options.url}`)):request=this.request(options,postData);const response=await request;return this.pace&&this.log.transient(`(${this.pace.inQueue()} | ${this.pace.inProgress()}) received ${options.method} ${options.url} `),response}async request(options,postData){try{const response=await this.issueRequest(options,postData);let authenticate=response.response.headers["www-authenticate"];if(authenticate){if(this.credentials){let auth;if(authenticate=authenticate.trim(),0===authenticate.indexOf("Digest"))auth=new AuthDigest(this.credentials.user,this.credentials.password);else{if(0!==authenticate.indexOf("Basic"))throw`unimplemented authentication request ${authenticate} for '${options.url}'`;auth=new AuthBasic(this.credentials.user,this.credentials.password)}return auth.testAuth(options,response.data,response.response),this.request(options)}throw"authentication missing; call 'setCredentials' before calling 'get'"}return response}catch(e){throw`error requesting ${options.url}: ${e}`}}async issueRequest(options,postData){const request=this;return new Promise((resolve,reject)=>{try{const xhr=new XMLHttpRequest,txt=request.isTextualRequest(options.pathname);xhr.open(options.method,options.url,!0),Object.keys(options.headers).forEach(h=>xhr.setRequestHeader(h,options.headers[h])),xhr.responseType=txt?"text":"arraybuffer",xhr.onload=function(e){const headersText=xhr.getAllResponseHeaders(),headers={"content-type":""};headersText.split("\r\n").map(h=>{const kv=h.split(":").map(p=>p.trim());kv[0].length&&(headers[kv[0]]=kv[1])});const contentType=this.responseType,txt=request.isTextualContent(contentType),response={data:this.response,response:{txt,headers,method:options.method,status:this.status,statusCode:this.status,statusMessage:`${this.status} ${this.statusText}`,url:this.responseURL}};resolve(response)},xhr.send(postData?JSON.stringify(postData):void 0)}catch(e){reject(e)}})}isTextualContent(contentType){const subTypes=contentType.split("/"),match=Request.contentTypes.filter(entry=>entry.subTypes.every((st,i)=>subTypes[i]===st));return match.length>0?match[0].isText:(this.log.warn(`no match found for '${contentType}'; caching as binary`),!1)}isTextualRequest(pathName){return["json","txt","html"].some(ext=>pathName.indexOf(ext)>=0)}}function shortCheckSum(s){let chk=305419896;for(let i=0;i<s.length;i++)chk+=s.charCodeAt(i)*(i+1);return(4294967295&chk).toString(16)}function uniquefy(array,key){const unique={};return key?array.filter(t=>!unique[t[""+key]]&&(unique[t[""+key]]=!0)):array.filter(t=>!unique[""+t]&&(unique[""+t]=!0))}Request.contentTypes=[],Request.decoders={str2json:data=>{try{return JSON.parse(data)}catch(e){return{}}},html2json:void 0},[["text",!0],["text/html",!0],["image",!1],["audio",!1],["font",!1],["application/json",!0],["application/pdf",!1],["application/vnd.openxmlformats-officedocument.presentationml.presentation",!1],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",!1],["application/vnd.ms-powerpoint",!1],["application/vnd.ms-excel",!1],["application/vnd.ms-excel.sheet.macroenabled.12",!1],["application/octet-stream",!1]].forEach(e=>Request.addContentType(e[0],e[1]))},417:module=>{module.exports=function(){return this.crypto}()}},__webpack_module_cache__={};function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}return __webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__(687)})();